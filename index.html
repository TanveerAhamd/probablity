<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>Dragon Tiger Live Strategy Assistant By Tanveer Ahmad</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <style>
        :root {
            --bg: #071226;
            --card: #0f1724;
            --accent: #ffd84d;
            --muted: #9aa7c7;
            --dragon: #2e9efd;
            --tiger: #f39c12;
            --tie: #2ecc71;
            --glass: rgba(255, 255, 255, 0.03);
        }

        * {
            box-sizing: border-box
        }

        body {
            margin: 0;
            font-family: Inter, system-ui, Segoe UI, Roboto, "Helvetica Neue", Arial;
            background: linear-gradient(180deg, var(--bg) 0%, #04121a 100%);
            color: #e9f0ff;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            padding: 14px;
        }

        .app {
            max-width: 1100px;
            margin: 0 auto;
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.02), rgba(255, 255, 255, 0.01));
            border-radius: 14px;
            padding: 18px;
            box-shadow: 0 12px 40px rgba(2, 6, 23, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.03);
        }

        header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
            flex-wrap: wrap;
        }

        header h1 {
            margin: 0;
            font-size: 20px;
            color: var(--accent);
            letter-spacing: 0.6px;
            display: flex;
            gap: 10px;
            align-items: center;
        }

        header p {
            margin: 0;
            color: var(--muted);
            font-size: 13px;
        }

        .top-row {
            display: flex;
            gap: 12px;
            margin-top: 16px;
            flex-wrap: wrap;
            align-items: stretch;
        }

        .panel {
            background: var(--glass);
            padding: 14px;
            border-radius: 12px;
            flex: 1;
            min-width: 260px;
            border: 1px solid rgba(255, 255, 255, 0.02);
        }

        .panel.small {
            flex: 0.62;
            min-width: 220px;
        }

        .panel.big {
            flex: 1.5;
        }

        .balance {
            font-size: 18px;
            font-weight: 700;
            color: #fff;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .balance .val {
            color: var(--accent);
            font-size: 20px;
            font-weight: 900;
            transition: color .25s ease, transform .18s ease;
        }

        .controls {
            display: flex;
            gap: 10px;
            margin-top: 12px;
            flex-wrap: wrap;
        }

        .controls button {
            padding: 10px 14px;
            border-radius: 10px;
            border: none;
            cursor: pointer;
            font-weight: 700;
            color: #042;
            background: #cfe8ff;
            box-shadow: 0 6px 12px rgba(46, 158, 253, 0.08);
        }

        .controls .dragon {
            background: linear-gradient(180deg, var(--dragon), #1687d9);
            color: #fff;
        }

        .controls .tiger {
            background: linear-gradient(180deg, var(--tiger), #d67b07);
            color: #fff;
        }

        .controls .tie {
            background: linear-gradient(180deg, var(--tie), #25b86a);
            color: #042;
        }

        .controls .muted {
            background: #2b3443;
            color: var(--muted);
        }

        .history-row {
            display: flex;
            gap: 8px;
            align-items: center;
            justify-content: center;
            margin-top: 18px;
            flex-wrap: wrap;
        }

        .bead {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
            box-shadow: 0 8px 18px rgba(0, 0, 0, 0.45);
            transform: scale(0.98);
            transition: transform .15s ease, box-shadow .15s;
            font-size: 15px;
        }

        .bead:hover {
            transform: scale(1.05);
        }

        .bead.D {
            background: linear-gradient(180deg, var(--dragon), #1473b2);
            color: #fff;
        }

        .bead.T {
            background: linear-gradient(180deg, var(--tiger), #cc6a09);
            color: #fff;
        }

        .bead.Tie {
            background: linear-gradient(180deg, var(--tie), #1fa55b);
            color: #fff;
        }

        .suggestion {
            padding: 12px 16px;
            border-radius: 12px;
            background: linear-gradient(90deg, #071526, #04121c);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.03);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .suggestText {
            font-weight: 900;
            font-size: 17px;
            color: var(--accent);
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .suggestSide {
            font-size: 14px;
            color: #cfe8ff;
            font-weight: 700;
            padding: 8px 10px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.02);
        }

        .small-muted {
            font-size: 13px;
            color: var(--muted);
        }

        .settings {
            display: flex;
            gap: 8px;
            align-items: center;
            flex-wrap: wrap;
            margin-top: 10px;
        }

        .settings label {
            font-size: 13px;
            color: var(--muted);
            display: flex;
            gap: 6px;
            align-items: center;
        }

        input[type=number],
        select {
            padding: 8px 10px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.04);
            background: #071226;
            color: #e9f0ff;
        }

        .history-log {
            margin-top: 12px;
            height: 210px;
            overflow: auto;
            background: rgba(0, 0, 0, 0.12);
            padding: 12px;
            border-radius: 10px;
            font-family: monospace;
            font-size: 13px;
            color: #dbe9ff;
            white-space: pre-wrap;
        }

        footer {
            margin-top: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: var(--muted);
            font-size: 13px;
            flex-wrap: wrap;
            gap: 8px;
        }

        .stats {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            align-items: center;
        }

        .chip {
            padding: 6px 10px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.02);
            color: var(--muted);
            font-weight: 800;
        }

        .green-flash {
            animation: balanceGreen .9s ease;
        }

        .red-flash {
            animation: balanceRed .9s ease;
        }

        @keyframes balanceGreen {
            0% {
                transform: scale(1)
            }

            40% {
                transform: scale(1.06);
                color: #2ecc71
            }

            100% {
                transform: scale(1)
            }
        }

        @keyframes balanceRed {
            0% {
                transform: scale(1)
            }

            40% {
                transform: scale(1.06);
                color: #ff6b6b
            }

            100% {
                transform: scale(1)
            }
        }

        .fancy-btn {
            padding: 10px 14px;
            border-radius: 10px;
            border: none;
            cursor: pointer;
            font-weight: 800;
            background: linear-gradient(90deg, #1f6bff, #7ad1ff);
            color: #042;
            box-shadow: 0 10px 30px rgba(50, 100, 255, 0.12);
        }

        /* responsive */
        @media(max-width:980px) {
            .history-row {
                gap: 6px;
            }

            .bead {
                width: 38px;
                height: 38px;
                font-size: 13px;
            }

            .panel.small {
                min-width: 170px;
            }
        }

        @media(max-width:640px) {
            body {
                padding: 8px;
            }

            .app {
                padding: 12px;
            }

            header {
                flex-direction: column;
                align-items: flex-start;
                gap: 6px;
            }

            .top-row {
                flex-direction: column;
            }

            .panel.big {
                order: 1;
            }
        }
    </style>
</head>

<body>
    <div class="app" role="application" aria-label="Dragon Tiger Assistant">
        <header>
            <h1>üêâ Dragon Tiger ‚Äî Live Strategy Assistant</h1>
           <a style="background-color: #1473b2; color: white; cursor: pointer; border-radius: 5px;" href="temp1.html" class="dragon">
                    <button>test-1</button></a>
           <a style="background-color: #1473b2; color: white; cursor: pointer; border-radius: 5px;" href="temp2.html" class="dragon">
                    <button>test-2</button></a>
           <a style="background-color: #1473b2; color: white; cursor: pointer; border-radius: 5px;" href="temp3.html" class="dragon">
                    <button>test-3</button></a>
           <a style="background-color: #1473b2; color: white; cursor: pointer; border-radius: 5px;" href="temp4.html" class="dragon">
                    <button>test-4</button></a>
           <a style="background-color: #1473b2; color: white; cursor: pointer; border-radius: 5px;" href="temp5.html" class="dragon">
                    <button>test-5</button></a>
           <a style="background-color: #1473b2; color: white; cursor: pointer; border-radius: 5px;" href="temp6.html" class="dragon">
                    <button>test-6</button></a>
        
            <p style="text-align: right;">By Tanveer Ahmad ‚Äî Enter round results (D/T/Tie), follow suggestions</p>
        </header>

        <div class="top-row">
            <!-- Left panel -->
            <div class="panel small" aria-hidden="false">
                <div class="balance">Balance: <span class="val" id="balance">4000</span> <span
                        class="small-muted">Rs</span></div>

                <div style="margin-top:10px" class="small-muted">Starting Balance</div>
                <div style="display:flex; gap:8px; margin-top:6px;">
                    <input id="startBalInput" type="number" placeholder="4000" style="flex:1" />
                    <button class="fancy-btn" id="setBalBtn">Set</button>
                </div>
                <div class="small-muted" style="margin-top:8px">Base Bet</div>
                <div style="margin-top:6px; display:flex; gap:8px; align-items:center;">
                    <select id="baseBet" aria-label="Select base bet">
                        <option value="20">20 Rs (payout +19)</option>
                        <option value="40">40 Rs (payout +38)</option>
                        <option value="100">100 Rs (payout +95)</option>
                    </select>
                    <label class="small-muted" style="margin-left:6px;">Max Steps</label>
                    <input id="maxStep" type="number" min="1" max="8" value="5" style="width:70px" />
                </div>

                <div class="settings">
                    <label><input id="modeSkip" type="radio" name="mode" value="skip" checked /> Skip on 2</label>
                    <label><input id="modeFollow" type="radio" name="mode" value="follow" /> Follow on 2</label>
                    <label><input id="modeOpp" type="radio" name="mode" value="opp" /> Opposite on 2</label>
                </div>

                <div style="margin-top:12px;">
                    <button class="dragon" id="placeBtn" style="width:100%;">Place Suggested Bet</button>
                    <div class="small-muted" style="margin-top:6px">(Click when you place the bet in game)</div>
                </div>

                <div style="display:flex; gap:8px; margin-top:12px;">
                    <button class="muted" id="undoBtn" style="flex:1;">Undo</button>
                    <button class="muted" id="resetBtn" style="flex:1;">Reset</button>
                </div>

                <div style="margin-top:12px;">
                    <button class="muted" id="toggleAuto" style="width:100%;">Auto Place: <span
                            id="autoPlaceLabel">OFF</span></button>
                </div>
            </div>

            <!-- Middle panel -->
            <div>
                <div style="font-size:14px; color:var(--muted); margin-bottom:6px;">Current Strategy Suggestion</div>
            </div>
            <div class="panel big" aria-hidden="false">
                <div style="display:flex; justify-content:space-between; align-items:center; gap:12px;">
                    <div style="flex:1; min-width:0;">
                        <div class="small-muted">Current Suggestion</div>
                        <div class="suggestion" id="suggestionBox">
                            <div>
                                <div class="suggestText" id="suggestText">Enter results to begin</div>
                                <div class="small-muted" id="suggestReason"></div>
                            </div>
                            <div style="text-align:right">
                                <div class="small-muted">Bet Amount</div>
                                <div style="font-weight:900; font-size:18px; color:var(--accent)" id="suggestAmt">-
                                </div>
                                <div style="margin-top:6px"><span id="suggestSide" class="suggestSide">-</span></div>
                            </div>
                        </div>
                    </div>

                    <div style="width:220px; text-align:center;">
                        <div class="small-muted">Wins</div>
                        <div style="font-size:20px; font-weight:900; color:var(--dragon)" id="wins">0</div>
                        <div style="height:8px"></div>
                        <div class="small-muted">Losses</div>
                        <div style="font-size:20px; font-weight:900; color:var(--tiger)" id="losses">0</div>
                    </div>
                </div>

                <div class="history-row" id="historyRow" aria-hidden="false"></div>

                <div class="history-log" id="logArea" style="margin-top:12px;">Logs will appear here...</div>
            </div>

            <!-- Right panel -->
            <div class="panel small" aria-hidden="false">
                <div style="font-size:14px; color:var(--muted)">Manual Result Entry</div>
                <div class="controls" style="margin-top:10px;">
                    <button class="dragon" onclick="onResult('D')">Dragon (D)</button>
                    <button class="tiger" onclick="onResult('T')">Tiger (T)</button>
                    <button class="tie" onclick="onResult('Tie')">Tie</button>
                </div>

                <div style="margin-top:14px;">
                    <div class="small-muted">Actions</div>
                    <div style="display:flex; gap:8px; margin-top:8px;">
                        <button class="muted" onclick="exportLog()">Export Log</button>
                        <button class="muted" onclick="clearLogs()">Clear Log</button>
                    </div>
                </div>

                <div style="margin-top:14px;">
                    <div class="small-muted">Quick Stats</div>
                    <div class="stats" style="margin-top:8px;">
                        <div class="chip">History: <span id="histCount">0</span></div>
                        <div class="chip">Tie: <span id="tieCount">0</span></div>
                        <div class="chip">Cycle: <span id="cycle">0</span></div>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <div>Tip: Use keyboard shortcuts ‚Äî <strong>D</strong> = Dragon, <strong>T</strong> = Tiger,
                <strong>Y</strong> = Tie, <strong>P</strong> = Place Bet
            </div>
            <div>Built for practice ‚Äî not financial advice.</div>
        </footer>
    </div>

    <script>
        /* -----------------------
           Dragon Tiger Assistant
           - Single-file final version
           - Profit rules: 20->+19, 40->+38, 100->+95
           - Loss: full bet deducted
           - Start balance saved in localStorage
           ------------------------ */

        const STORAGE_KEY = 'dt_assistant_balance_v1';

        let state = {
            history: [],     // 'D','T','Tie'
            placed: false,
            placedSide: null,
            placedAmt: 0,
            cycle: 0,
            wins: 0,
            losses: 0,
            balance: 4000,
            tieCount: 0,
            logs: []
        };

        const MAX_H = 100;
        const logArea = document.getElementById('logArea');
        const histRow = document.getElementById('historyRow');
        const suggestText = document.getElementById('suggestText');
        const suggestAmt = document.getElementById('suggestAmt');
        const suggestSide = document.getElementById('suggestSide');
        const suggestReason = document.getElementById('suggestReason');
        const balanceEl = document.getElementById('balance');
        const winsEl = document.getElementById('wins');
        const lossesEl = document.getElementById('losses');
        const histCount = document.getElementById('histCount');
        const tieCountEl = document.getElementById('tieCount');
        const cycleEl = document.getElementById('cycle');
        const autoPlaceLabel = document.getElementById('autoPlaceLabel');

        function loadBalance() {
            const s = localStorage.getItem(STORAGE_KEY);
            if (s !== null) {
                const num = Number(s);
                if (!isNaN(num)) state.balance = num;
            } else {
                // prompt at first load
                const p = prompt("Enter starting balance (Rs)", "4000");
                const val = Number(p);
                if (!isNaN(val) && val > 0) {
                    state.balance = val;
                    localStorage.setItem(STORAGE_KEY, String(val));
                }
            }
        }
        loadBalance();

        /* helpers */
        function appendLog(s) {
            const t = new Date().toLocaleTimeString();
            state.logs.unshift(`[${t}] ${s}`);
            if (state.logs.length > 800) state.logs.pop();
            logArea.textContent = state.logs.join("\n");
        }
        function saveBalance() {
            localStorage.setItem(STORAGE_KEY, String(state.balance));
        }
        function getBaseBet() { return Number(document.getElementById('baseBet').value || 20); }
        function getMaxStep() { return Number(document.getElementById('maxStep').value || 5); }
        function getMode() {
            const r = document.querySelector('input[name="mode"]:checked');
            return r ? r.value : 'skip';
        }
        function formatRs(n) { return Math.round(n); }

        /* UI update */
        function updateUI() {
            // history beads (latest 20)
            histRow.innerHTML = '';
            const show = state.history.slice(-20);
            for (let i = 0; i < show.length; i++) {
                const v = show[i];
                const d = document.createElement('div');
                d.className = 'bead ' + (v === 'Tie' ? 'Tie' : v);
                d.innerText = v === 'Tie' ? 'Tie' : v;
                histRow.appendChild(d);
            }

            histCount.textContent = state.history.length;
            tieCountEl.textContent = state.tieCount;
            cycleEl.textContent = state.cycle;
            balanceEl.textContent = formatRs(state.balance);
            winsEl.textContent = state.wins;
            lossesEl.textContent = state.losses;

            const sug = computeSuggestion();
            suggestText.textContent = sug.text;
            suggestReason.textContent = sug.reason || '';
            suggestAmt.textContent = sug.amount ? sug.amount + ' Rs' : '-';
            suggestSide.textContent = sug.side ? (sug.side === 'D' ? 'Dragon' : 'Tiger') : '-';

            // color hint for suggestion
            if (sug.action === 'BET') {
                if (sug.side === 'D') {
                    suggestSide.style.background = "linear-gradient(180deg,var(--dragon), #1473b2)";
                    suggestSide.style.color = "#fff";
                } else {
                    suggestSide.style.background = "linear-gradient(180deg,var(--tiger), #cc6a09)";
                    suggestSide.style.color = "#fff";
                }
            } else {
                suggestSide.style.background = "rgba(255,255,255,0.02)";
                suggestSide.style.color = "#cfe8ff";
            }
        }

        /* compute last non-tie streak */
        function lastNonTieStreak() {
            let hist = state.history;
            let label = null, len = 0;
            for (let i = hist.length - 1; i >= 0; i--) {
                if (hist[i] === 'Tie') continue;
                if (label === null) { label = hist[i]; len = 1; }
                else if (hist[i] === label) len++;
                else break;
            }
            return { label, len };
        }

        /* suggestion logic */
        function computeSuggestion() {
            const base = getBaseBet();
            const maxs = getMaxStep();
            let action = 'SKIP', text = 'No clear signal', amount = 0, reason = '', side = null;
            const { label, len } = lastNonTieStreak();

            if (!label) return { action: 'SKIP', text: 'No D/T yet', amount: 0, reason: 'Waiting', side: null };

            if (state.placed) {
                return { action: 'INFO', text: `Bet placed on ${state.placedSide} (${state.placedAmt} Rs)`, amount: state.placedAmt, reason: 'Waiting result', side: state.placedSide };
            }

            const mode = getMode();

            if (len >= 3) {
                const amt = Math.min(base * (2 ** state.cycle), base * (2 ** (maxs - 1)));
                action = 'BET'; text = `Follow streak ${label}`; amount = amt; reason = `streak ${len}`; side = label;
            } else if (len === 2) {
                if (mode === 'skip') {
                    action = 'SKIP'; text = `2 in a row (${label}) ‚Äî SKIP`; amount = 0; reason = 'Wait for confirmation'; side = null;
                } else if (mode === 'follow') {
                    const amt = Math.min(base * (2 ** state.cycle), base * (2 ** (maxs - 1)));
                    action = 'BET'; text = `Follow on 2: ${label}`; amount = amt; reason = 'mode: follow on 2'; side = label;
                } else if (mode === 'opp') {
                    const opp = label === 'D' ? 'T' : 'D';
                    const amt = Math.min(base * (2 ** state.cycle), base * (2 ** (maxs - 1)));
                    action = 'BET'; text = `Opposite on 2: Bet ${opp}`; amount = amt; reason = 'mode: opposite on 2'; side = opp;
                }
            } else {
                action = 'SKIP'; text = `Single ${label} ‚Äî skip`; amount = 0; reason = 'wait for streak'; side = null;
            }

            return { action, text, amount, reason, side };
        }

        /* compute profit by bet amount rules */
        function calcProfitFor(betAmt) {
            if (betAmt === 20) return 19;
            if (betAmt === 40) return 38;
            if (betAmt === 100) return 95;
            // fallback: 95% payout (profit)
            return Math.round(betAmt * 0.95);
        }

        /* Place suggested bet (user action) */
        document.getElementById('placeBtn').addEventListener('click', () => {
            const sug = computeSuggestion();
            if (sug.action !== 'BET' || !sug.amount || !sug.side) {
                appendLog('No valid suggestion to place.');
                return;
            }
            state.placed = true;
            state.placedSide = sug.side;
            state.placedAmt = Number(sug.amount);
            appendLog(`Placed bet: ${state.placedSide} | ${state.placedAmt} Rs (cycle ${state.cycle})`);
            updateUI();
        });

        /* Undo / Reset */
        document.getElementById('undoBtn').addEventListener('click', () => {
            if (state.history.length === 0) return;
            const last = state.history.pop();
            if (last === 'Tie') state.tieCount = Math.max(0, state.tieCount - 1);
            state.placed = false; state.placedSide = null; state.placedAmt = 0;
            appendLog('Undo last: ' + last);
            updateUI();
        });

        document.getElementById('resetBtn').addEventListener('click', () => {
            if (!confirm('Reset all state?')) return;
            state.history = []; state.placed = false; state.placedSide = null; state.placedAmt = 0;
            state.cycle = 0; state.wins = 0; state.losses = 0; state.tieCount = 0; state.logs = [];
            // keep balance as-is; clear logs only
            appendLog('State reset (balance preserved).');
            updateUI();
        });

        /* Set starting balance */
        document.getElementById('setBalBtn').addEventListener('click', () => {
            const v = Number(document.getElementById('startBalInput').value);
            if (isNaN(v) || v <= 0) { alert('Enter valid balance'); return; }
            state.balance = Math.round(v);
            saveBalance();
            appendLog('Starting balance set to ' + state.balance + ' Rs');
            updateUI();
        });

        /* Auto place toggle */
        let autoPlace = false;
        document.getElementById('toggleAuto').addEventListener('click', () => {
            autoPlace = !autoPlace;
            autoPlaceLabel.textContent = autoPlace ? 'ON' : 'OFF';
            appendLog('AutoPlace ' + (autoPlace ? 'ON' : 'OFF'));
        });

        /* handle result entry */
        function onResult(r) {
            // register
            state.history.push(r);
            if (r === 'Tie') state.tieCount++;

            // auto-place logic: if autoPlace ON and suggestion exists
            if (autoPlace && !state.placed) {
                const sug = computeSuggestion();
                if (sug.action === 'BET' && sug.amount > 0 && sug.side) {
                    state.placed = true;
                    state.placedSide = sug.side;
                    state.placedAmt = Number(sug.amount);
                    appendLog(`(Auto) Placed bet ${state.placedSide} ${state.placedAmt} Rs (cycle ${state.cycle})`);
                }
            }

            // If bet placed prior to this result evaluate
            if (state.placed && (r === 'D' || r === 'T')) {
                if (r === state.placedSide) {
                    // WIN: add profit only
                    state.wins++;
                    const profit = calcProfitFor(Number(state.placedAmt));
                    state.balance += profit;
                    appendLog(`Result ${r}: WIN! Profit +${profit} Rs (bet ${state.placedAmt})`);
                    // UI animation
                    flashBalance('green');
                    state.cycle = 0;
                } else {
                    // LOSE: full stake deducted
                    state.losses++;
                    state.balance -= Number(state.placedAmt);
                    appendLog(`Result ${r}: LOSE -${state.placedAmt} Rs`);
                    flashBalance('red');
                    state.cycle = Math.min(state.cycle + 1, getMaxStep() - 1);
                }
                // clear placed bet state
                state.placed = false; state.placedSide = null; state.placedAmt = 0;
                saveBalance();
            } else {
                // no active bet -> spectator round
                appendLog(`Result ${r}: No active bet`);
            }

            // keep history bounded
            if (state.history.length > MAX_H) state.history.shift();
            updateUI();
        }

        /* helper to flash balance color */
        function flashBalance(type) {
            const el = balanceEl;
            if (type === 'green') {
                el.classList.remove('red-flash'); void el.offsetWidth; el.classList.add('green-flash');
                setTimeout(() => el.classList.remove('green-flash'), 900);
            } else {
                el.classList.remove('green-flash'); void el.offsetWidth; el.classList.add('red-flash');
                setTimeout(() => el.classList.remove('red-flash'), 900);
            }
        }

        /* export / clear logs */
        function exportLog() {
            const text = state.logs.slice().reverse().join("\n");
            const blob = new Blob([text], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url; a.download = 'dt_session_log.txt'; a.click();
            URL.revokeObjectURL(url);
        }
        function clearLogs() { state.logs = []; logArea.textContent = ''; appendLog('Logs cleared'); }

        /* keyboard shortcuts */
        document.addEventListener('keydown', (e) => {
            if (e.key === 'd' || e.key === 'D') onResult('D');
            if (e.key === 't' || e.key === 'T') onResult('T');
            if (e.key === 'y' || e.key === 'Y') onResult('Tie');
            if (e.key === 'p' || e.key === 'P') document.getElementById('placeBtn').click();
            if (e.key === 'u' || e.key === 'U') document.getElementById('undoBtn').click();
            if (e.key === 'r' || e.key === 'R') document.getElementById('resetBtn').click();
        });

        /* start message & initial UI */
        appendLog('Assistant loaded. Shortcuts: D/T/Y (Tie). P=Place, U=Undo, R=Reset.');
        updateUI();

        /* Expose onResult for buttons inline */
        window.onResult = onResult;
    </script>
</body>

</html